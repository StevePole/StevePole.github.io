<div class="container">
    <h2 class="page-header">
        API Designer
        <small>Design, spec and document RESTful APIs.</small>
    </h2>
    <div class="row">
        <div class="col-md-6">
            <p>This tool enables you to design an API that conforms with the
                Swagger API documentation system. Swagger will generate you
                a full set of documentation and a test console based on your
                selections.</p>

            <p>You can also generate an editor from previous Swagger JSON
                for editing, then re-export your updates.  As long as your
                Swagger JSON is generated by this tool then incremental
                edits will be non-destructive, you will not lose any
                information.</p>
        </div>

        <div class="col-md-6">
            <p>This tool is <em>opinionated</em>, it is more restrictive than
                Swagger in some areas to encourage best practice design and
                to drive consistency amongst APIs. Whilst you should be able
                to import Swagger JSON from a different source you may find:</p>

            <ul>
                <li>Edits are destructive - you may lose data from your
                    original file</li>
                <li>It breaks...</li>
            </ul>

            <p>Your latest version of each API will be stored in local
                storage for easy recall. APIs are not (currently) persisted across the
                web so will not be available from other machines.
            </p>
        </div>
    </div>

    <h2 class="page-header">
        Generate Editor
        <small>Generate an API designer from existing JSON spec.</small>
    </h2>

    <p>Use this form to generate an interface to edit your existings API
        specification, select an API you previously generated, or build your
        API from scratch below.</p>

    <div class="row">
        <div class="col-md-7">
            <textarea id="api_spec" class="form-control" ng-bind="vm.inputJson"></textarea>

            <div class="btn-toolbar">
                <input type="button"
                    class="btn btn-primary"
                    value="Generate Editor"
                    ng-click="vm.generateEditorFromInput()" />
                <input type="button" id="getJson"
                    class="btn btn-primary"
                    value="Save &amp; Generate Swagger"
                    ng-click="vm.saveJson()" />
                <input type="button" id="clearDesigner"
                    class="btn btn-default"
                    value="Clear Editor"
                    ng-click="vm.clearDesigner()"/>
            </div>
        </div>
        <div class="col-md-5">
            <h3>Locally Stored APIs</h3>
            <div id="localApis">
                <ul>
                    <li class="existing-api" ng-cloak
                        ng-repeat="api in vm.localApis">
                        <a href="" class="existing-api-load"
                            ng-click="generateEditorFromLocalStorage(api.basePath)">
                            <span ng-if="api.info.title">{{api.info.title}}</span>
                            <span ng-if="!api.info.title">{{api.basePath}}{{api.resourcePath}}</span>
                        </a>
                        -
                        <a href="docs.html?ls={{api.basePath}}" target="_self">
                            docs
                        </a>
                        <a href="" class="existing-api-remove pull-right close"
                            ng-click="vm.removeApiFromLocalStorage(api.basePath)">
                            &times;
                        </a>
                    </li>
                    <li class="empty">None</li>
                </ul>
            </div>
            <h3>Published APIs</h3>
            <div id="publishedApis">
                <ul>
                    <li class="existing-api" ng-cloak
                        ng-repeat="api in vm.publishedApis">
                        <a href="" class="existing-api-load"
                            ng-click="vm.generateEditorFromFile(api)">
                            <span ng-if="api.info.title">{{api.info.title}}</span>
                            <span ng-if="!api.info.title">{{api.basePath}}{{api.resourcePath}}</span>
                        </a>
                        -
                        <a href="docs.html?json={{api.basePath}}" target="_self">
                            docs
                        </a>
                    </li>
                    <li class="empty">None</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="errors" class="alert alert-danger" ng-show="vm.errors.length" ng-cloak>
        <p ng-repeat="error in vm.errors">{{error}}</p>
    </div>
    <div id="success" class="alert alert-success" style="display: none;">
        JSON validates successfully!
    </div>

    <diff-report></diff-report>

    <pre>
vm.json.basePath: {{vm.json.basePath}} 
    </pre>

    <meta-design
        info="vm.json.info"
        json="vm.json"
        version="vm.json.apiVersion"></meta-design>
    <auth-design
        auths="vm.json.authorizations"></auth-design>
    <global-params-design
        params="vm.json.parameters"
        models="vm.json.models"></global-params-design>
    <jsonp-design
        jsonp="vm.json.jsonp"
        models="vm.json.models"
        params="vm.json.parameters"></jsonp-design>
    <throttling-design
        throttling="vm.json.throttling"></throttling-design>
    <errors-design
        models="vm.json.models"></errors-design>
    <http-codes-design
        codes="vm.json.responseMessages"
        models="vm.json.models"></http-codes-design>
    <response-headers-design
        headers="vm.json.responseHeaders"></response-headers-design>
    <envelope-design
        model="vm.json.envelope"
        models="vm.json.models"></envelope-design>
    <apis-design
        json="vm.json"></apis-design>
    <models-design
        models="vm.json.models"
        json="vm.json"></models-design>
    <!--
    <test-design></test-design>
    -->
</div>
